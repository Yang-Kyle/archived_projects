# 学习建议



1. 活动：**创建注册、启动方式、之间的数据传递**、生命周期、启动模式、**Intent & IntentFilter**
2. ⭐UI开发：常用布局使用、常用控件用法 & 交互策略、Adapter
3. 存储：SP`偏好设置`、File`文件`、SQLite`批量结构化数据` | 网络存储`云端`<br/>CP`程序间交流沟通`：创建注册和使用 | CO
4. 服务：**创建注册、启动方式**、常用系统服务、**BR创建注册、普通广播 & 有序广播**、监听系统广播
5. 多线程：机制、Handler线程通信机制**(模型)、AsyncTask**
6. 网络编程：掌握**安卓HTTP**的几种方法、安卓TCP Socket通信基本原理、XML文件和J**SON数据解析**常规方法、WebView和WebService实现原理

# 01 基础

## Android平台特性

> 桌面组件：Widget插件
>
> 通信：Intent
>
> 进程 & 内存：VM、Runtime、Tombstone / 存储：SQLite、SharedPreferences

1.应用程序框架支持组件的重用与替换

2.Dalvik/ART虚拟机专门为移动设备进行了优化

3.内部集成浏览器基于开源的WebKit引擎

4.优化的图形库包括2D和3D图形库

5.多媒体支持包括常见的音频、视频和静态印象文件格式

6.提供对GSM电话（依赖于硬件）、蓝牙、EDGE、3G、WiFi(依赖于硬件)支持。

7.提供对照相机、GPS、指南针和加速度计等的支持。

8.丰富的开发环境包括SDK、大量的类库、设备模以器、调试工具、内存及性能分析图表插件

## 分层架构

1. 应用程序层
2. 应用程序框架层：[Android Dev Platform](https://developer.android.com/)
3. 系统库 & Android运行时

> // 系统库：图层管理、媒体库、SQLite、OpenGLEState、FreeType、WebKit、SGL、SSL等
>
> `Dalvik VM`主要是完成对生命周期的管理、堆栈的管理、线程的管理、安全和异常的管理以及垃圾回收等重要功能
>
> `MediaFramework`基于PacketVideo（即PV）OpenCORE的多媒体框架
>
> `SQLite`一个通用的嵌入式数据库
>
> `OpenGL ES`提供对3D的支持
>
> `FreeType`位图和矢量字体的功能
>
> `SGL`2D图像引擎
>
> `SSL`Secure Socket Layer，为数据通讯提供安全支持
>
> `libc`C语言标准库，C库是通过Linux的系统调用来实现

4. Linux内核

> Display Driver：基于Linux的帧缓冲的显示驱动
>
> M-systems Driver ：M-Systems公司的DOC技术（DiskOnChip）驱动
>
> Audio Driver：常用基于ALSA（Advanced Linux Sound Architecture）音频驱动
>
> Binder IPC Driver ：Android一个特殊的驱动程序，具有单独的设备节点，提供进程间通讯的功能

## 四大组件

- Activity

1. 通俗地认为是用户界面，一个应用程序包含多个Activity
2. 生命周期需要在AndroidManifest.xml进行声明
3. 通过堆栈来管理Activity

> 大多数的应用程序都是由多个屏幕显示组成。Android会把每个从主菜单打开的Activity保留在堆栈中，所以当打开一个新屏幕时，之前的屏幕会被置为暂停状态并且压入历史堆栈中

- Service 后台

1. 不直接与用户交互，没有用户界面
2. 能够长期在后台运行
3. 比Activity的优先级高，不会被轻易终止
4. 需要在AndroidManifest.xml中进行声明
5. 两种启动方式
   - 绑定式`不求同生、但求同死`
   - 独立启动式

- BroadcastReceiver^广播接收器^

1. 实现全局监听，完成不同组件之间的通信
2. 没有用户界面，但可启动Activity或用NotificationManager来通知用户
3. 需要在AndroidManifest.xml中进行声明
4. 用途：
   - 用户主动检查版本更新，有更新时发送广播，由Receiver接收，并以Dialog的方式提示用户更新
   - 服务器推送通知，淘宝、银行等的通知

- ContentProvider^内容提供器^ 传输

  > 支持多个应用程序的数据共享，是跨应用共享数据的唯一方法。当开发者希望自己的应用数据能与其他应用共享时，内容提供器将会非常有用

  | 应用场景：一个短信接收应用A，将接收到的陌生短信的发信人添加到联系人管理应用B中

  - 方法1：A直接去操作B所记录的数据，比如SPS、文件、数据库等`SPS包含有或引用了可执行软件、源文件以及软件支持的信息`

  - 方法2：B通过ContentProvider暴露自己的数据操作接口，其他应用都可访问

  - > 当一个应用需要把自己的数据暴露给其他程序使用时，通过ContentProvider暴露接口，不管该应用是否启动，其他应用都可以通过ContentResolver来操作数据，包括增删改查

## 安卓IDE

[AndroidDevTools](https://www.androiddevtools.cn/)

[Android 开发者](https://developer.android.google.cn/index.html)

[Android SDK在线更新方法](https://www.cnblogs.com/cnxkey/articles/7684865.html)

> **配置SDK JDK**

```java
// ⭐🛠🛠
add-ons：存放Google API，比如Google Maps
build-tools：存放各版本SDK编译工具
docs：离线开发者文档 Android SDK API
extras：扩展开发包，如HAXM加速
platforms：各版本SDK，如android-25
platforms-tools：各版本SDK通用工具，如adb、sqlite等
samples：各版本API样例
skins：Android模拟器的皮肤
sources：各版本SDK源码
tools：重要的工具，比如ant、ddms、logcat、emulator等
system-images：AVD模拟器映像文件
```

## 新建程序结构

app⇲

—AndroidManifest.xml 清单文件 | 程序名称、图标、访问权限等整体属性、四大组件

—build：编译后文件`最终的.apk`

—libs：jar包或*.so等

—src⇲

——androidTest & test & main⇲

———java & res⇲

————drawable`存储xml文件，dpi表示存储分辨率的图片`
————layout`布局文件`
————mipmap`原生图片资源`
values`app引用的一些值`⇲
—————colors.xml`一些color的样式`
—————dimens.xml`一些公用dp值`
—————strings.xml`引用string值`
—————styles..xml`app要用的一些样式`



## AVD

> Snaphot：快照功能，加快AVD的启动，但会影响程序调试，导致对代码的修改不能立即反应在AVD上
>
> Use Host GPU：使用宿主机的GPU加速，一般在调试3D游戏时开启，不过通常在真机上做3D游戏的调试
>
> 模拟器无SIM卡，无wifi网络，硬件资源受限，推荐在真机上调试程序
>
> ---
>
> **设置RAM和SD卡大小**
>
> 系统语言设置：menu->setting->locale&text->....
>
> 输入法设置：input method->拼音输入法
>
> 横竖屏切换`ctrl+F11`

Name：模拟器名字

Device：屏幕分辨率

Target：平台版本

Keyboard：使用硬件键盘

BackCamera：后摄像头

Memory Options：

RAM：手机内存

VM Heap：堆内存

Internal Storage：ROM，存放安装到模拟器上的APP

SD Card：SD卡大小

## 打包APK才能发布`ADT调试时自动生成`

路径`/app/build/outputs/apk`

## debug



# 02 Activity & Intent

# 03 UI

# 04 存储

# 05 服务 & 广播

# 06 多线程

# 07 网络编程

---



# 上机

> SDK位置：`%LocalAppdata%\Android\Sdk\system-images`

- SDK Tools

1. SDK Build Tool 33/27
2. Google USB Driver 
3. Android Emulator

- build.gradle

1. compile/tager SdkVersion 33→27

## 雷电模拟器使用方法

> 连击版本号→USB调试 `USB Driver`
>
> 对应版本 API 改build.gradle的SDK

- 重启/分辨率是手机版的

# 速度入门

Kotlin是谷歌官方语言

- .idea、.gradle：自动生成、一般删掉
- app：核心目录
  - build： `make project` 生成、代码压缩时会删除来减小大小、apk直接拖到虚拟机中运行
  - lib：第三方jar包
  - src
    - androidTest：安卓测试用例
    - main
      - Java：包名、代码
    - res
      - drawable：图片
      - layout：布局文件
      - mipmap：应用图标 不同后缀处理不同屏幕后缀
    - manifest：清单文件 四大组件注册、权限、app图标
  - test：单元测试
  - build.gradle：模块构建脚本 依赖第三方库
  - 项目代码混淆规则、有一些类的使用不能混淆

- gradle：没有的话它会自己下载
- build.gradle：全局脚本
- gradle.properties：全局``gradle参数``配置文件
- gradlew.bat：gradle命令 win版
- local.properties：sdk路径
- setting.gradle：项目引入模块

# 报错集

## ① The emulator process for AVD Pixel 2 API XX has terminated.

> 移动`C:\Users\VOCALOID\.android`下的AVD到`C:\IDE\Android\SDK`下

## ② minSdk(API XX)>deviceSdk(API XX)on device XXXX

> 修改App\build.gradle下的`minSdk`版本

## ③ 卡在LOGO界面/未运行时显示已运行

原因：电脑忙/内存加速删除了临时文件

> 删除`C:\IDE\Android\SDK avd\.android\avd/Pixel 2 API XX.avd/*.lock`

- 一般需要停掉某个进程
- 关掉其他设备（开着雷电时，打开成功会自动关闭）

## ④ The processing instruction target matching “\[xX]\[mM][lL]” is not allowed.

> 适用于所有.xml

- 将`<?xml version="1.0" encoding="UTF-8" ?>`前多余的注释、空格和空行等去掉即可

## 代码不提示

> 区分大小写``

代码补齐 Ctrl + Space



## 配置文件.xml书写标签不自动生成属性及其值

1. 关了AS
2. 给一些文件添加`.bak`后缀

`C:\Users\XXX\.android`：build-cache

`C:\Users\XXX\.Androidstudio3.2\system`

- caches | compiler
- compile-server | conversion
- external_build_system | frameworks
- gradle | resource_folder_cache
